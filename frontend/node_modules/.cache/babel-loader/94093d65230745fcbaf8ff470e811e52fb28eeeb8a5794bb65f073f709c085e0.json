{"ast":null,"code":"import apiClient from './apiClient';\n\n// Register user\nexport const registerUser = async userData => {\n  const response = await apiClient.post('/auth/register', userData);\n  const data = await response.json();\n\n  // For now, backend just returns a message, not tokens\n  // When backend is updated to return tokens, this will work automatically\n  return data;\n};\n\n// Login user\nexport const loginUser = async credentials => {\n  const response = await apiClient.post('/auth/login', credentials);\n  const data = await response.json();\n  if (response.ok && data.access_token) {\n    // Store tokens\n    apiClient.setTokens(data.access_token, data.refresh_token);\n\n    // Store user data if provided by backend\n    if (data.user) {\n      localStorage.setItem('user', JSON.stringify(data.user));\n    } else {\n      // If backend doesn't provide user data, store what we have from login form\n      localStorage.setItem('user', JSON.stringify({\n        email: credentials.email\n      }));\n    }\n  }\n  return data;\n};\n\n// Logout user\nexport const logoutUser = async () => {\n  try {\n    const response = await apiClient.post('/auth/logout');\n\n    // Clear tokens regardless of response\n    apiClient.clearTokens();\n    return response.json();\n  } catch (error) {\n    // Clear tokens even if logout fails\n    apiClient.clearTokens();\n    throw error;\n  }\n};\n\n// Refresh token (used internally by apiClient)\nexport const refreshToken = async () => {\n  const response = await apiClient.post('/auth/refresh', {\n    refresh_token: apiClient.getRefreshToken()\n  });\n  if (response.ok) {\n    const data = await response.json();\n    apiClient.setTokens(data.access_token, data.refresh_token);\n    return data.access_token;\n  }\n  throw new Error('Token refresh failed');\n};\n\n// Check if user is authenticated\nexport const isAuthenticated = () => {\n  return !!apiClient.getAccessToken();\n};\n\n// Get current user data\nexport const getCurrentUser = () => {\n  const userStr = localStorage.getItem('user');\n  return userStr ? JSON.parse(userStr) : null;\n};","map":{"version":3,"names":["apiClient","registerUser","userData","response","post","data","json","loginUser","credentials","ok","access_token","setTokens","refresh_token","user","localStorage","setItem","JSON","stringify","email","logoutUser","clearTokens","error","refreshToken","getRefreshToken","Error","isAuthenticated","getAccessToken","getCurrentUser","userStr","getItem","parse"],"sources":["C:/Projects/gawa/frontend/src/api/auth.js"],"sourcesContent":["import apiClient from './apiClient';\r\n\r\n// Register user\r\nexport const registerUser = async (userData) => {\r\n  const response = await apiClient.post('/auth/register', userData);\r\n  const data = await response.json();\r\n  \r\n  // For now, backend just returns a message, not tokens\r\n  // When backend is updated to return tokens, this will work automatically\r\n  return data;\r\n};\r\n\r\n// Login user\r\nexport const loginUser = async (credentials) => {\r\n  const response = await apiClient.post('/auth/login', credentials);\r\n  const data = await response.json();\r\n  \r\n  if (response.ok && data.access_token) {\r\n    // Store tokens\r\n    apiClient.setTokens(data.access_token, data.refresh_token);\r\n    \r\n    // Store user data if provided by backend\r\n    if (data.user) {\r\n      localStorage.setItem('user', JSON.stringify(data.user));\r\n    } else {\r\n      // If backend doesn't provide user data, store what we have from login form\r\n      localStorage.setItem('user', JSON.stringify({\r\n        email: credentials.email\r\n      }));\r\n    }\r\n  }\r\n  \r\n  return data;\r\n};\r\n\r\n// Logout user\r\nexport const logoutUser = async () => {\r\n  try {\r\n    const response = await apiClient.post('/auth/logout');\r\n    \r\n    // Clear tokens regardless of response\r\n    apiClient.clearTokens();\r\n    \r\n    return response.json();\r\n  } catch (error) {\r\n    // Clear tokens even if logout fails\r\n    apiClient.clearTokens();\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Refresh token (used internally by apiClient)\r\nexport const refreshToken = async () => {\r\n  const response = await apiClient.post('/auth/refresh', {\r\n    refresh_token: apiClient.getRefreshToken()\r\n  });\r\n  \r\n  if (response.ok) {\r\n    const data = await response.json();\r\n    apiClient.setTokens(data.access_token, data.refresh_token);\r\n    return data.access_token;\r\n  }\r\n  \r\n  throw new Error('Token refresh failed');\r\n};\r\n\r\n// Check if user is authenticated\r\nexport const isAuthenticated = () => {\r\n  return !!apiClient.getAccessToken();\r\n};\r\n\r\n// Get current user data\r\nexport const getCurrentUser = () => {\r\n  const userStr = localStorage.getItem('user');\r\n  return userStr ? JSON.parse(userStr) : null;\r\n};\r\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,aAAa;;AAEnC;AACA,OAAO,MAAMC,YAAY,GAAG,MAAOC,QAAQ,IAAK;EAC9C,MAAMC,QAAQ,GAAG,MAAMH,SAAS,CAACI,IAAI,CAAC,gBAAgB,EAAEF,QAAQ,CAAC;EACjE,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;;EAElC;EACA;EACA,OAAOD,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAME,SAAS,GAAG,MAAOC,WAAW,IAAK;EAC9C,MAAML,QAAQ,GAAG,MAAMH,SAAS,CAACI,IAAI,CAAC,aAAa,EAAEI,WAAW,CAAC;EACjE,MAAMH,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;EAElC,IAAIH,QAAQ,CAACM,EAAE,IAAIJ,IAAI,CAACK,YAAY,EAAE;IACpC;IACAV,SAAS,CAACW,SAAS,CAACN,IAAI,CAACK,YAAY,EAAEL,IAAI,CAACO,aAAa,CAAC;;IAE1D;IACA,IAAIP,IAAI,CAACQ,IAAI,EAAE;MACbC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAACQ,IAAI,CAAC,CAAC;IACzD,CAAC,MAAM;MACL;MACAC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC;QAC1CC,KAAK,EAAEV,WAAW,CAACU;MACrB,CAAC,CAAC,CAAC;IACL;EACF;EAEA,OAAOb,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMc,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpC,IAAI;IACF,MAAMhB,QAAQ,GAAG,MAAMH,SAAS,CAACI,IAAI,CAAC,cAAc,CAAC;;IAErD;IACAJ,SAAS,CAACoB,WAAW,CAAC,CAAC;IAEvB,OAAOjB,QAAQ,CAACG,IAAI,CAAC,CAAC;EACxB,CAAC,CAAC,OAAOe,KAAK,EAAE;IACd;IACArB,SAAS,CAACoB,WAAW,CAAC,CAAC;IACvB,MAAMC,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EACtC,MAAMnB,QAAQ,GAAG,MAAMH,SAAS,CAACI,IAAI,CAAC,eAAe,EAAE;IACrDQ,aAAa,EAAEZ,SAAS,CAACuB,eAAe,CAAC;EAC3C,CAAC,CAAC;EAEF,IAAIpB,QAAQ,CAACM,EAAE,EAAE;IACf,MAAMJ,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAClCN,SAAS,CAACW,SAAS,CAACN,IAAI,CAACK,YAAY,EAAEL,IAAI,CAACO,aAAa,CAAC;IAC1D,OAAOP,IAAI,CAACK,YAAY;EAC1B;EAEA,MAAM,IAAIc,KAAK,CAAC,sBAAsB,CAAC;AACzC,CAAC;;AAED;AACA,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAM;EACnC,OAAO,CAAC,CAACzB,SAAS,CAAC0B,cAAc,CAAC,CAAC;AACrC,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAClC,MAAMC,OAAO,GAAGd,YAAY,CAACe,OAAO,CAAC,MAAM,CAAC;EAC5C,OAAOD,OAAO,GAAGZ,IAAI,CAACc,KAAK,CAACF,OAAO,CAAC,GAAG,IAAI;AAC7C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}